
<!DOCTYPE html>
<html lang="en">
    
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="Dev Odreystella&#39;s Blog">
    <title>Docker Compose - Dev Odreystella&#39;s Blog</title>
    <meta name="author" content="">
    
    
    
    <script type="application/ld+json">{"@context":"http://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":null,"sameAs":["https://github.com/","http://stackoverflow.com/users","https://www.linkedin.com/profile/","mailto"],"image":"profile.jpg"},"articleBody":"\n원티드 4월 백엔드 챌린지 2차 세션을 듣고 도커 컴포즈와 사용 방법에 대해 정리해보았다.\n\n\n\n\n도커 컴포즈란?\n단일 서버에서 여러개의 컨테이너를 하나의 서비스로 정의해 컨테이너를 묶음으로 관리할 수 있는 작업 환경을 제공하는 관리 도구입니다.\nYAML 파일을 사용한다.\n\n\n도커 컴포즈를 사용하는 이유\n웹 애플리케이션을 만든다고 할 때 기본적으로 프론트엔드, 백엔드, 데이터베이스가 필요하다고 가정해보자. 도커는 하나의 애플리케이션에 대해 하나의 컨테이너를 생성할 수 있는데, 도커 컴포즈를 사용하지 않는다면 프론트엔드 컨테이너, 백엔드 컨테이너, 데이터베이스 컨테이너를 생성해야 한다.  그리고 각 컨테이너를 docker run으로 실행해야한다. 매번 컨테이너를 생성하고, 실행시키는 것은 테스트 단계나, 운영단계에서 불편할 것이다.\n도커 컴포즈를 사용하게 되면 한 파일에 여러 컨테이너의 옵션과 환경을 정의할 수 있고, 복잡한 애플리케이션을 쉽게 관리할 수 있다.\n컨테이너 수가 많아지고 정의해야 할 옵션이 많아진다면 도커 컴포즈를 사용하는 것이 좋다.\n\n\n도커 컴포즈의 특징\n구성이 간편하다\ndocker-compose.yml 또는 compose.yml 파일 하나로 전체 애플리케이션 스택의 설정을 관리할 수 있다.\n\n\n명령어가 단순하다\ndocker compose up 커맨드로 컨테이너, 볼륨, 네트워크를 생성하고 실행한다.\ndocker compose down 커맨드로 컨테이너, 볼륨, 네트워크를 종료하고 제거한다.\ndocker compose ps 커맨드로 실행중인 컨테이너 목록을 확인한다.\n\n\n여러 복잡한 서비스를 관리할 수 있다.\n데이터베이스, 백엔드, 프론트엔드, 레디스 등을 한번에 관리할 수 있다. 각 서비스는 독립적인 컨테이너로 실행되지만, 도커 컴포즈를 통해 서로 연결되고 조율할 수 있다.\n\n\n각 컨테이너의 의존성, 네트워크, 볼륨 등을 정의할 수 있다.\n\n\nYAML 파일은 어떻게 생겼나?\nawesome-compose에서 가져온 간단한 코드 스니펫을 보고 이해해보자.\nDB, Flask, Nginx를 구성하는 파일이다.123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960version: &#x27;3&#x27;services:  db:    image: mysql:8    command: &#x27;--default-authentication-plugin=mysql_native_password&#x27;    restart: always    healthcheck:      test: [&#x27;CMD-SHELL&#x27;, &#x27;mysqladmin ping -h 127.0.0.1 --password=&quot;$$(cat /run/secrets/db-password)&quot; --silent&#x27;]      interval: 3s      retries: 5      start_period: 30s    secrets:      - db-password    volumes:      - db-data:/var/lib/mysql    networks:      - backnet    environment:      - MYSQL_DATABASE=example      - MYSQL_ROOT_PASSWORD_FILE=/run/secrets/db-password    expose:      - 3306      - 33060  backend:    build:      context: backend      target: builder    restart: always    secrets:      - db-password    ports:      - 8000:8000    networks:      - backnet      - frontnet    depends_on:      db:        condition: service_healthy  proxy:    build: proxy    restart: always    ports:      - 80:80    depends_on:       - backend    networks:      - frontnetvolumes:  db-data:secrets:  db-password:    file: db/password.txtnetworks:  backnet:  frontnet:\n\n\nYAML 파일로 보는 주요 옵션\nversion\n도커 컴포즈 파일의 버전을 명시한다. \n도커 엔진 버전에 의존성이 있으므로 가능하면 최신 버전을 사용하는 것이 좋다.\n\n\nservices\n애플리케이션을 구성하는 컨테이너들을 정의한다. 위의 파일은 db, backend, proxy 세개의 컨테이너를 정의하고 있으며, 도커 이미지, 포트 바인딩, 볼륨 마운트, 환경변수 등의 설정을 포함한다.\n\n\nnetworks\n컨테이너 간 통신을 위한 네트워크를 정의한다.\n이 항목을 정의하지 않으면 프로젝트 별로 브리지 타입의 네트워크를 생성한다.\n\n\nvolumes\n데이터를 영구적으로 저장하기 위한 볼륨을 정의한다. 컨테이너가 삭제되어도 데이터를 보존하여 여러 컨테이너 간에 데이터를 공유한다. \n\n\n기타 구성 요소\nenvironment\n서비스의 컨테이너 내부에서 사용할 환경변수를 지정한다.\nMYSQL_DATABASE=example 이나 MYSQL_DATABASE:example 포맷으로 사용한다.\ndocker run --env 이나 docker run -e 옵션과 동일하다.\n\n\ncommand\n컨테이너가 실행될 때 수행할 명령어를 설정한다.\ndocker run 명령어의 마지막에 붙는 커맨드와 같다.\n\n\ndepends_on\n특정 컨테이너에 대한 의존관계를 나타내며, 이 항목에 명시된 컨테이너가 먼저 생성되고 실행된다.\n위의 파일에서는 db &gt; backend &gt; proxy 순으로 생성되어야 한다.\n\n\nports\n서비스의 컨테이너를 개방할 포트를 설정한다.\ndocker run -p 와 같다.\n\n\nbuild\n이 항목에 정의된 도커파일에서 이미지를 빌드해서 서비스의 컨테이너를 생성한다.\n위의 파일에서는 proxy의 경우, proxy 디렉토리에 저장된 도커파일로 이미지를 빌드해 컨테이너를 생성한다.\nimage 옵션을 추가해 빌드한 이미지의 이름을 설정할 수 있다.\n\n\nsecrets\nAPI 키와 비밀번호같은 민감한 정보를 설정한다.\n위의 파일에서는 db 디렉토리 안에 password.txt를 확인한다.\n\n\n\n\n\n\n실습\nRun multi-container applications 공식문서를 보고 따라해본다.\ntodo app 프로젝트를 가져와서 도커 컴포즈의 명령어를 사용해보는 간단한 실습이다.\n\n\n참고\nDockerfile reference 공식문서\n도커 컴포즈 개념 정리 및 사용법\n\n\n\n","dateCreated":"2024-04-08T11:00:18+09:00","dateModified":"2024-04-09T01:02:24+09:00","datePublished":"2024-04-08T11:00:18+09:00","description":"\n원티드 4월 백엔드 챌린지 2차 세션을 듣고 도커 컴포즈와 사용 방법에 대해 정리해보았다.\n","headline":"Docker Compose","image":[],"mainEntityOfPage":{"@type":"WebPage","@id":"https://odreystella.github.io/2024/04/08/Docker-compose-for-wanted-challenge/"},"publisher":{"@type":"Organization","name":null,"sameAs":["https://github.com/","http://stackoverflow.com/users","https://www.linkedin.com/profile/","mailto"],"image":"profile.jpg","logo":{"@type":"ImageObject","url":"profile.jpg"}},"url":"https://odreystella.github.io/2024/04/08/Docker-compose-for-wanted-challenge/","keywords":"원티드"}</script>
    <meta name="description" content="원티드 4월 백엔드 챌린지 2차 세션을 듣고 도커 컴포즈와 사용 방법에 대해 정리해보았다.">
<meta property="og:type" content="blog">
<meta property="og:title" content="Docker Compose">
<meta property="og:url" content="https://odreystella.github.io/2024/04/08/Docker-compose-for-wanted-challenge/index.html">
<meta property="og:site_name" content="Dev Odreystella&#39;s Blog">
<meta property="og:description" content="원티드 4월 백엔드 챌린지 2차 세션을 듣고 도커 컴포즈와 사용 방법에 대해 정리해보았다.">
<meta property="og:locale" content="en_US">
<meta property="article:published_time" content="2024-04-08T02:00:18.000Z">
<meta property="article:modified_time" content="2024-04-08T16:02:24.528Z">
<meta property="article:tag" content="원티드">
<meta name="twitter:card" content="summary">
    
    
        
    
    
        <meta property="og:image" content="https://odreystella.github.io/assets/images/profile.jpg"/>
    
    
    
    
    <!--STYLES-->
    
<link rel="stylesheet" href="/assets/css/style-s9cubcvh9guwrlo0a7unmtmxvwii0oase98xnhhysjkyxhquqqkxkrhfbdfm.min.css">

    <!--STYLES END-->
    

    

    
        
    
</head>

    <body>
        <div id="blog">
            <!-- Define author's picture -->


    
        
            
        
    

<header id="header" data-behavior="4">
    <i id="btn-open-sidebar" class="fa fa-lg fa-bars"></i>
    <div class="header-title">
        <a
            class="header-title-link"
            href="/"
            aria-label=""
        >
            Dev Odreystella&#39;s Blog
        </a>
    </div>
    
        
            <a
                class="header-right-picture "
                href="#about"
                aria-label="Open the link: /#about"
            >
        
        
            <img class="header-picture" src="/assets/images/profile.jpg" alt="Author&#39;s picture"/>
        
        </a>
    
</header>

            <!-- Define author's picture -->



        
    

<nav id="sidebar" data-behavior="4">
    <div class="sidebar-container">
        
            <div class="sidebar-profile">
                <a
                    href="/#about"
                    aria-label="Read more about the author"
                >
                    <img class="sidebar-profile-picture" src="/assets/images/profile.jpg" alt="Author&#39;s picture"/>
                </a>
                <h4 class="sidebar-profile-name"></h4>
                
                    <h5 class="sidebar-profile-bio"><p>Odreystella</p>
</h5>
                
            </div>
        
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="/"
                            
                            rel="noopener"
                            title="Home"
                        >
                        <i class="sidebar-button-icon fa fa-home" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Home</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="/all-categories"
                            
                            rel="noopener"
                            title="Categories"
                        >
                        <i class="sidebar-button-icon fa fa-bookmark" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Categories</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="/all-tags"
                            
                            rel="noopener"
                            title="Tags"
                        >
                        <i class="sidebar-button-icon fa fa-tags" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Tags</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="/all-archives"
                            
                            rel="noopener"
                            title="Archives"
                        >
                        <i class="sidebar-button-icon fa fa-archive" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Archives</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link open-algolia-search"
                            href="#search"
                            
                            rel="noopener"
                            title="Search"
                        >
                        <i class="sidebar-button-icon fa fa-search" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Search</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="#about"
                            
                            rel="noopener"
                            title="About"
                        >
                        <i class="sidebar-button-icon fa fa-question" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">About</span>
                    </a>
            </li>
            
        </ul>
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="https://github.com/"
                            
                                target="_blank"
                            
                            rel="noopener"
                            title="GitHub"
                        >
                        <i class="sidebar-button-icon fab fa-github" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">GitHub</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="http://stackoverflow.com/users"
                            
                                target="_blank"
                            
                            rel="noopener"
                            title="Stack Overflow"
                        >
                        <i class="sidebar-button-icon fab fa-stack-overflow" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Stack Overflow</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="https://www.linkedin.com/profile/"
                            
                                target="_blank"
                            
                            rel="noopener"
                            title="LinkedIn"
                        >
                        <i class="sidebar-button-icon fab fa-linkedin" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">LinkedIn</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="/mailto"
                            
                            rel="noopener"
                            title="Mail"
                        >
                        <i class="sidebar-button-icon fa fa-envelope" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Mail</span>
                    </a>
            </li>
            
        </ul>
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="/atom.xml"
                            
                            rel="noopener"
                            title="RSS"
                        >
                        <i class="sidebar-button-icon fa fa-rss" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">RSS</span>
                    </a>
            </li>
            
        </ul>
        
    </div>
</nav>

            
            <div id="main" data-behavior="4"
                 class="
                        hasCoverMetaIn
                        ">
                
<article class="post">
    
    
        <div class="post-header main-content-wrap text-left">
    
        <h1 class="post-title">
            Docker Compose
        </h1>
    
    
        <div class="post-meta">
    <time datetime="2024-04-08T11:00:18+09:00">
	
		    Apr 08, 2024
    	
    </time>
    
        <span>in </span>
        
    <a class="category-link" href="/categories/Docker/">Docker</a>


    
</div>

    
</div>

    
    <div class="post-content markdown">
        <div class="main-content-wrap">
            <blockquote>
<p>원티드 4월 백엔드 챌린지 2차 세션을 듣고 도커 컴포즈와 사용 방법에 대해 정리해보았다.</p>
</blockquote>
<a id="more"></a>

<ol>
<li>도커 컴포즈란?<ul>
<li>단일 서버에서 <strong>여러개의 컨테이너</strong>를 <strong>하나의 서비스</strong>로 정의해 컨테이너를 <strong>묶음</strong>으로 관리할 수 있는 작업 환경을 제공하는 관리 도구입니다.</li>
<li>YAML 파일을 사용한다.</li>
</ul>
</li>
<li>도커 컴포즈를 사용하는 이유<ul>
<li>웹 애플리케이션을 만든다고 할 때 기본적으로 프론트엔드, 백엔드, 데이터베이스가 필요하다고 가정해보자. 도커는 하나의 애플리케이션에 대해 하나의 컨테이너를 생성할 수 있는데, 도커 컴포즈를 사용하지 않는다면 프론트엔드 컨테이너, 백엔드 컨테이너, 데이터베이스 컨테이너를 생성해야 한다.  그리고 각 컨테이너를 <code>docker run</code>으로 실행해야한다. 매번 컨테이너를 생성하고, 실행시키는 것은 테스트 단계나, 운영단계에서 불편할 것이다.</li>
<li>도커 컴포즈를 사용하게 되면 한 파일에 여러 컨테이너의 옵션과 환경을 정의할 수 있고, 복잡한 애플리케이션을 쉽게 관리할 수 있다.</li>
<li>컨테이너 수가 많아지고 정의해야 할 옵션이 많아진다면 도커 컴포즈를 사용하는 것이 좋다.</li>
</ul>
</li>
<li>도커 컴포즈의 특징<ul>
<li>구성이 간편하다<ul>
<li><code>docker-compose.yml</code> 또는 <code>compose.yml</code> 파일 하나로 전체 애플리케이션 스택의 설정을 관리할 수 있다.</li>
</ul>
</li>
<li>명령어가 단순하다<ul>
<li><code>docker compose up</code> 커맨드로 컨테이너, 볼륨, 네트워크를 생성하고 실행한다.</li>
<li><code>docker compose down</code> 커맨드로 컨테이너, 볼륨, 네트워크를 종료하고 제거한다.</li>
<li><code>docker compose ps</code> 커맨드로 실행중인 컨테이너 목록을 확인한다.</li>
</ul>
</li>
<li>여러 복잡한 서비스를 관리할 수 있다.<ul>
<li>데이터베이스, 백엔드, 프론트엔드, 레디스 등을 한번에 관리할 수 있다. 각 서비스는 독립적인 컨테이너로 실행되지만, 도커 컴포즈를 통해 서로 연결되고 조율할 수 있다.</li>
</ul>
</li>
<li>각 컨테이너의 의존성, 네트워크, 볼륨 등을 정의할 수 있다.</li>
</ul>
</li>
<li>YAML 파일은 어떻게 생겼나?<ul>
<li><a target="_blank" rel="noopener" href="https://github.com/docker/awesome-compose?tab=readme-ov-file">awesome-compose</a>에서 가져온 간단한 코드 스니펫을 보고 이해해보자.</li>
<li>DB, Flask, Nginx를 구성하는 파일이다.<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">version:</span> <span class="string">&#x27;3&#x27;</span></span><br><span class="line"><span class="attr">services:</span></span><br><span class="line">  <span class="attr">db:</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">mysql:8</span></span><br><span class="line">    <span class="attr">command:</span> <span class="string">&#x27;--default-authentication-plugin=mysql_native_password&#x27;</span></span><br><span class="line">    <span class="attr">restart:</span> <span class="string">always</span></span><br><span class="line">    <span class="attr">healthcheck:</span></span><br><span class="line">      <span class="attr">test:</span> [<span class="string">&#x27;CMD-SHELL&#x27;</span>, <span class="string">&#x27;mysqladmin ping -h 127.0.0.1 --password=&quot;$$(cat /run/secrets/db-password)&quot; --silent&#x27;</span>]</span><br><span class="line">      <span class="attr">interval:</span> <span class="string">3s</span></span><br><span class="line">      <span class="attr">retries:</span> <span class="number">5</span></span><br><span class="line">      <span class="attr">start_period:</span> <span class="string">30s</span></span><br><span class="line">    <span class="attr">secrets:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">db-password</span></span><br><span class="line">    <span class="attr">volumes:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">db-data:/var/lib/mysql</span></span><br><span class="line">    <span class="attr">networks:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">backnet</span></span><br><span class="line">    <span class="attr">environment:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">MYSQL_DATABASE=example</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">MYSQL_ROOT_PASSWORD_FILE=/run/secrets/db-password</span></span><br><span class="line">    <span class="attr">expose:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="number">3306</span></span><br><span class="line">      <span class="bullet">-</span> <span class="number">33060</span></span><br><span class="line"></span><br><span class="line">  <span class="attr">backend:</span></span><br><span class="line">    <span class="attr">build:</span></span><br><span class="line">      <span class="attr">context:</span> <span class="string">backend</span></span><br><span class="line">      <span class="attr">target:</span> <span class="string">builder</span></span><br><span class="line">    <span class="attr">restart:</span> <span class="string">always</span></span><br><span class="line">    <span class="attr">secrets:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">db-password</span></span><br><span class="line">    <span class="attr">ports:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="number">8000</span><span class="string">:8000</span></span><br><span class="line">    <span class="attr">networks:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">backnet</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">frontnet</span></span><br><span class="line">    <span class="attr">depends_on:</span></span><br><span class="line">      <span class="attr">db:</span></span><br><span class="line">        <span class="attr">condition:</span> <span class="string">service_healthy</span></span><br><span class="line"></span><br><span class="line">  <span class="attr">proxy:</span></span><br><span class="line">    <span class="attr">build:</span> <span class="string">proxy</span></span><br><span class="line">    <span class="attr">restart:</span> <span class="string">always</span></span><br><span class="line">    <span class="attr">ports:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="number">80</span><span class="string">:80</span></span><br><span class="line">    <span class="attr">depends_on:</span> </span><br><span class="line">      <span class="bullet">-</span> <span class="string">backend</span></span><br><span class="line">    <span class="attr">networks:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">frontnet</span></span><br><span class="line"></span><br><span class="line"><span class="attr">volumes:</span></span><br><span class="line">  <span class="attr">db-data:</span></span><br><span class="line"></span><br><span class="line"><span class="attr">secrets:</span></span><br><span class="line">  <span class="attr">db-password:</span></span><br><span class="line">    <span class="attr">file:</span> <span class="string">db/password.txt</span></span><br><span class="line"></span><br><span class="line"><span class="attr">networks:</span></span><br><span class="line">  <span class="attr">backnet:</span></span><br><span class="line">  <span class="attr">frontnet:</span></span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li>YAML 파일로 보는 주요 옵션<ol>
<li><code>version</code><ul>
<li>도커 컴포즈 파일의 버전을 명시한다. </li>
<li>도커 엔진 버전에 의존성이 있으므로 가능하면 최신 버전을 사용하는 것이 좋다.</li>
</ul>
</li>
<li><code>services</code><ul>
<li>애플리케이션을 구성하는 컨테이너들을 정의한다. 위의 파일은 db, backend, proxy 세개의 컨테이너를 정의하고 있으며, 도커 이미지, 포트 바인딩, 볼륨 마운트, 환경변수 등의 설정을 포함한다.</li>
</ul>
</li>
<li><code>networks</code><ul>
<li>컨테이너 간 통신을 위한 네트워크를 정의한다.</li>
<li>이 항목을 정의하지 않으면 프로젝트 별로 브리지 타입의 네트워크를 생성한다.</li>
</ul>
</li>
<li><code>volumes</code><ul>
<li>데이터를 영구적으로 저장하기 위한 볼륨을 정의한다. 컨테이너가 삭제되어도 데이터를 보존하여 여러 컨테이너 간에 데이터를 공유한다. </li>
</ul>
</li>
<li>기타 구성 요소<ul>
<li><code>environment</code><ul>
<li>서비스의 컨테이너 내부에서 사용할 환경변수를 지정한다.</li>
<li><code>MYSQL_DATABASE=example</code> 이나 <code>MYSQL_DATABASE:example</code> 포맷으로 사용한다.</li>
<li><code>docker run --env</code> 이나 <code>docker run -e</code> 옵션과 동일하다.</li>
</ul>
</li>
<li><code>command</code><ul>
<li>컨테이너가 실행될 때 수행할 명령어를 설정한다.</li>
<li><code>docker run</code> 명령어의 마지막에 붙는 커맨드와 같다.</li>
</ul>
</li>
<li><code>depends_on</code><ul>
<li>특정 컨테이너에 대한 의존관계를 나타내며, 이 항목에 명시된 컨테이너가 먼저 생성되고 실행된다.</li>
<li>위의 파일에서는 db &gt; backend &gt; proxy 순으로 생성되어야 한다.</li>
</ul>
</li>
<li><code>ports</code><ul>
<li>서비스의 컨테이너를 개방할 포트를 설정한다.</li>
<li><code>docker run -p</code> 와 같다.</li>
</ul>
</li>
<li><code>build</code><ul>
<li>이 항목에 정의된 도커파일에서 이미지를 빌드해서 서비스의 컨테이너를 생성한다.</li>
<li>위의 파일에서는 proxy의 경우, proxy 디렉토리에 저장된 도커파일로 이미지를 빌드해 컨테이너를 생성한다.</li>
<li><code>image</code> 옵션을 추가해 빌드한 이미지의 이름을 설정할 수 있다.</li>
</ul>
</li>
<li><code>secrets</code><ul>
<li>API 키와 비밀번호같은 민감한 정보를 설정한다.</li>
<li>위의 파일에서는 db 디렉토리 안에 password.txt를 확인한다.</li>
</ul>
</li>
</ul>
</li>
</ol>
</li>
<li>실습<ul>
<li><a target="_blank" rel="noopener" href="https://docs.docker.com/guides/walkthroughs/multi-container-apps/">Run multi-container applications</a> 공식문서를 보고 따라해본다.</li>
<li>todo app 프로젝트를 가져와서 도커 컴포즈의 명령어를 사용해보는 간단한 실습이다.</li>
</ul>
</li>
<li>참고<ul>
<li><a target="_blank" rel="noopener" href="https://docs.docker.com/reference/dockerfile/">Dockerfile reference 공식문서</a></li>
<li><a target="_blank" rel="noopener" href="https://seosh817.tistory.com/387">도커 컴포즈 개념 정리 및 사용법</a></li>
</ul>
</li>
</ol>

            


        </div>
    </div>
    <div id="post-footer" class="post-footer main-content-wrap">
        
            <div class="post-footer-tags">
                <span class="text-color-light text-small">TAGGED IN</span><br/>
                
    <a class="tag tag--primary tag--small t-none-link" href="/tags/%EC%9B%90%ED%8B%B0%EB%93%9C/" rel="tag">원티드</a>

            </div>
        
        
            <div class="post-actions-wrap">
    <nav>
        <ul class="post-actions post-action-nav">
            <li class="post-action">
                
                    
                <a
                    class="post-action-btn btn btn--default tooltip--top"
                    href="/2024/04/09/Docker-volume-for-wanted-challenge/"
                    data-tooltip="Docker Volume"
                    aria-label="PREVIOUS: Docker Volume"
                >
                    
                        <i class="fa fa-angle-left" aria-hidden="true"></i>
                        <span class="hide-xs hide-sm text-small icon-ml">PREVIOUS</span>
                    </a>
            </li>
            <li class="post-action">
                
                    
                <a
                    class="post-action-btn btn btn--default tooltip--top"
                    href="/2024/04/07/DRF-Test-Code/"
                    data-tooltip="DRF Test Code"
                    aria-label="NEXT: DRF Test Code"
                >
                    
                        <span class="hide-xs hide-sm text-small icon-mr">NEXT</span>
                        <i class="fa fa-angle-right" aria-hidden="true"></i>
                    </a>
            </li>
        </ul>
    </nav>
    <ul class="post-actions post-action-share">
        <li class="post-action hide-lg hide-md hide-sm">
            <a
                class="post-action-btn btn btn--default btn-open-shareoptions"
                href="#btn-open-shareoptions"
                aria-label="Share this post"
            >
                <i class="fa fa-share-alt" aria-hidden="true"></i>
            </a>
        </li>
        
            
            
            <li class="post-action hide-xs">
                <a
                    class="post-action-btn btn btn--default"
                    target="new" href="https://www.facebook.com/sharer/sharer.php?u=https://odreystella.github.io/2024/04/08/Docker-compose-for-wanted-challenge/"
                    title="Share on Facebook"
                    aria-label="Share on Facebook"
                >
                    <i class="fab fa-facebook" aria-hidden="true"></i>
                </a>
            </li>
        
            
            
            <li class="post-action hide-xs">
                <a
                    class="post-action-btn btn btn--default"
                    target="new" href="https://twitter.com/intent/tweet?text=https://odreystella.github.io/2024/04/08/Docker-compose-for-wanted-challenge/"
                    title="Share on Twitter"
                    aria-label="Share on Twitter"
                >
                    <i class="fab fa-twitter" aria-hidden="true"></i>
                </a>
            </li>
        
            
            
            <li class="post-action hide-xs">
                <a
                    class="post-action-btn btn btn--default"
                    target="new" href="https://plus.google.com/share?url=https://odreystella.github.io/2024/04/08/Docker-compose-for-wanted-challenge/"
                    title="Share on Google+"
                    aria-label="Share on Google+"
                >
                    <i class="fab fa-google-plus" aria-hidden="true"></i>
                </a>
            </li>
        
        
            
        
        <li class="post-action">
            
                <a class="post-action-btn btn btn--default" href="#" aria-label="Back to top">
            
                <i class="fa fa-list" aria-hidden="true"></i>
            </a>
        </li>
    </ul>
</div>


        
        
            
        
    </div>
</article>



                <footer id="footer" class="main-content-wrap">
    <span class="copyrights">
        Copyrights &copy; 2024 null. All Rights Reserved.
    </span>
</footer>

            </div>
            
                <div id="bottom-bar" class="post-bottom-bar" data-behavior="4">
                    <div class="post-actions-wrap">
    <nav>
        <ul class="post-actions post-action-nav">
            <li class="post-action">
                
                    
                <a
                    class="post-action-btn btn btn--default tooltip--top"
                    href="/2024/04/09/Docker-volume-for-wanted-challenge/"
                    data-tooltip="Docker Volume"
                    aria-label="PREVIOUS: Docker Volume"
                >
                    
                        <i class="fa fa-angle-left" aria-hidden="true"></i>
                        <span class="hide-xs hide-sm text-small icon-ml">PREVIOUS</span>
                    </a>
            </li>
            <li class="post-action">
                
                    
                <a
                    class="post-action-btn btn btn--default tooltip--top"
                    href="/2024/04/07/DRF-Test-Code/"
                    data-tooltip="DRF Test Code"
                    aria-label="NEXT: DRF Test Code"
                >
                    
                        <span class="hide-xs hide-sm text-small icon-mr">NEXT</span>
                        <i class="fa fa-angle-right" aria-hidden="true"></i>
                    </a>
            </li>
        </ul>
    </nav>
    <ul class="post-actions post-action-share">
        <li class="post-action hide-lg hide-md hide-sm">
            <a
                class="post-action-btn btn btn--default btn-open-shareoptions"
                href="#btn-open-shareoptions"
                aria-label="Share this post"
            >
                <i class="fa fa-share-alt" aria-hidden="true"></i>
            </a>
        </li>
        
            
            
            <li class="post-action hide-xs">
                <a
                    class="post-action-btn btn btn--default"
                    target="new" href="https://www.facebook.com/sharer/sharer.php?u=https://odreystella.github.io/2024/04/08/Docker-compose-for-wanted-challenge/"
                    title="Share on Facebook"
                    aria-label="Share on Facebook"
                >
                    <i class="fab fa-facebook" aria-hidden="true"></i>
                </a>
            </li>
        
            
            
            <li class="post-action hide-xs">
                <a
                    class="post-action-btn btn btn--default"
                    target="new" href="https://twitter.com/intent/tweet?text=https://odreystella.github.io/2024/04/08/Docker-compose-for-wanted-challenge/"
                    title="Share on Twitter"
                    aria-label="Share on Twitter"
                >
                    <i class="fab fa-twitter" aria-hidden="true"></i>
                </a>
            </li>
        
            
            
            <li class="post-action hide-xs">
                <a
                    class="post-action-btn btn btn--default"
                    target="new" href="https://plus.google.com/share?url=https://odreystella.github.io/2024/04/08/Docker-compose-for-wanted-challenge/"
                    title="Share on Google+"
                    aria-label="Share on Google+"
                >
                    <i class="fab fa-google-plus" aria-hidden="true"></i>
                </a>
            </li>
        
        
            
        
        <li class="post-action">
            
                <a class="post-action-btn btn btn--default" href="#" aria-label="Back to top">
            
                <i class="fa fa-list" aria-hidden="true"></i>
            </a>
        </li>
    </ul>
</div>


                </div>
                
    <div id="share-options-bar" class="share-options-bar" data-behavior="4">
        <i id="btn-close-shareoptions" class="fa fa-times"></i>
        <ul class="share-options">
            
                
                
                <li class="share-option">
                    <a
                        class="share-option-btn"
                        target="new"
                        href="https://www.facebook.com/sharer/sharer.php?u=https://odreystella.github.io/2024/04/08/Docker-compose-for-wanted-challenge/"
                        aria-label="Share on Facebook"
                    >
                        <i class="fab fa-facebook" aria-hidden="true"></i><span>Share on Facebook</span>
                    </a>
                </li>
            
                
                
                <li class="share-option">
                    <a
                        class="share-option-btn"
                        target="new"
                        href="https://twitter.com/intent/tweet?text=https://odreystella.github.io/2024/04/08/Docker-compose-for-wanted-challenge/"
                        aria-label="Share on Twitter"
                    >
                        <i class="fab fa-twitter" aria-hidden="true"></i><span>Share on Twitter</span>
                    </a>
                </li>
            
                
                
                <li class="share-option">
                    <a
                        class="share-option-btn"
                        target="new"
                        href="https://plus.google.com/share?url=https://odreystella.github.io/2024/04/08/Docker-compose-for-wanted-challenge/"
                        aria-label="Share on Google+"
                    >
                        <i class="fab fa-google-plus" aria-hidden="true"></i><span>Share on Google+</span>
                    </a>
                </li>
            
        </ul>
    </div>


            
        </div>
        


    
        
    

<div id="about">
    <div id="about-card">
        <div id="about-btn-close">
            <i class="fa fa-times"></i>
        </div>
        
            <img id="about-card-picture" src="/assets/images/profile.jpg" alt="Author&#39;s picture"/>
        
            <h4 id="about-card-name"></h4>
        
            <div id="about-card-bio"><p>Odreystella</p>
</div>
        
        
            <div id="about-card-job">
                <i class="fa fa-briefcase"></i>
                <br/>
                <p>author.job</p>

            </div>
        
        
    </div>
</div>

        
        
<div id="cover" style="background-image:url('/assets/images/cover.jpg');"></div>
        <!--SCRIPTS-->

<script src="/assets/js/script-buvapuslwfowfkx0w6qhxphbbnwhqezkrxx1dd6puligsitecubmpci0a9cf.min.js"></script>

<!--SCRIPTS END-->


    




    </body>
</html>
